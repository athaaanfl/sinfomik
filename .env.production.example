# =====================================================
# SINFOMIK - Production Configuration (VM Linux)
# =====================================================
# Copy this file to .env for production deployment
# Single .env file for both backend and frontend
# =====================================================

# =====================================================
# BACKEND CONFIGURATION
# =====================================================

# Server
PORT=5000
NODE_ENV=production

# =====================================================
# DATABASE - PostgreSQL
# =====================================================

DB_TYPE=postgres
DB_HOST=localhost
DB_PORT=5432
DB_NAME=sinfomik_db
DB_USER=sinfomik_user
DB_PASSWORD=GANTI_PASSWORD_DATABASE_YANG_KUAT

# Connection Pool
DB_POOL_MAX=50
DB_POOL_MIN=5
DB_QUERY_TIMEOUT=30000

# =====================================================
# SECURITY
# =====================================================

# JWT Secret - WAJIB GANTI dengan random string minimal 32 karakter
# Generate dengan: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=GANTI_DENGAN_RANDOM_STRING_MINIMAL_32_KARAKTER

JWT_EXPIRES_IN=24h

# =====================================================
# CORS - VM Linux Server
# =====================================================

# Main Frontend URL
FRONTEND_URL=http://20.41.105.73

# Additional allowed origins (comma-separated)
# Format: no spaces after comma
ALLOWED_ORIGINS=http://20.41.105.73:3000,http://20.41.105.73:80

# Jika sudah punya domain:
# FRONTEND_URL=https://sinfomik.yourdomain.com
# ALLOWED_ORIGINS=http://20.41.105.73,https://www.sinfomik.yourdomain.com

# =====================================================
# RATE LIMITING (Production - Strict)
# =====================================================

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200
AUTH_RATE_LIMIT_MAX=50

# =====================================================
# FILE UPLOAD
# =====================================================

MAX_FILE_SIZE=10485760
UPLOAD_DIR=/home/atha/sinfomik/backend/uploads

# =====================================================
# FRONTEND CONFIGURATION
# =====================================================

# Backend API URL (untuk frontend build)
REACT_APP_API_BASE_URL=http://20.41.105.73:5000

# Jika pakai Nginx reverse proxy:
# REACT_APP_API_BASE_URL=http://20.41.105.73

# Jika sudah HTTPS:
# REACT_APP_API_BASE_URL=https://api.sinfomik.yourdomain.com

# PWA
REACT_APP_ENABLE_PWA=true

# App Info
REACT_APP_NAME=SINFOMIK
REACT_APP_VERSION=1.0.0

# Production build optimization
GENERATE_SOURCEMAP=false

# =====================================================
# LOGGING
# =====================================================

LOG_LEVEL=info
LOG_TO_FILE=true
LOG_FILE_PATH=/home/atha/sinfomik/logs/backend.log
